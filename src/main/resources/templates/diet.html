<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ë‹¤ì´ì–´íŠ¸ í”„ë¡œê·¸ë¨ ì„¤ë¬¸</title>
    <style>
        body {
            font-family: 'Segoe UI', sans-serif;
            background-color: #121212;
            color: white;
            padding: 40px;
        }
        nav {
            position: fixed;
            top: 10px;
            left: 10px;
            z-index: 999;
        }
        nav button {
            padding: 8px 16px;
            font-size: 14px;
            background-color: #555;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
        }
        nav button:hover {
            background-color: #777;
        }
        .step {
            display: none;
            max-width: 600px;
            margin: 60px auto 0;
            background: #1e1e1e;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
            text-align: center;
        }
        .step.active {
            display: block;
        }
        h2 {
            text-align: center;
            margin-bottom: 20px;
        }
        .option {
            background: #2c2c2c;
            margin: 10px 0;
            padding: 15px;
            border-radius: 8px;
            cursor: pointer;
        }
        .option:hover {
            background: #3a3a3a;
        }
        .option input {
            margin-right: 10px;
        }
        .button-group {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        .next-btn {
            flex: 1;
            margin: 0 5px;
            padding: 15px;
            font-size: 18px;
            background-color: #00c896;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
        }
        .next-btn:hover {
            background-color: #00b284;
        }
        #result-area {
            display: none;
            max-width: 1000px;
            margin: 30px auto;
            background: #1e1e1e;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
        }
        #home-btn {
            margin-top: 20px;
            padding: 12px 24px;
            font-size: 16px;
            background-color: #555;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
        }
        #home-btn:hover {
            background-color: #777;
        }
        #result-area img {
            width: 200px;
            margin: 10px;
        }
    </style>
</head>
<body>

<!-- ìƒë‹¨ ë‚˜ê°€ê¸° ë²„íŠ¼ -->
<nav>
    <button onclick="goHome()">ë‚˜ê°€ê¸°</button>
</nav>

<h2>ë§ì¶¤í˜• ë‹¤ì´ì–´íŠ¸ í”„ë¡œê·¸ë¨ ì„¤ë¬¸</h2>

<form id="bulkForm">
    <!-- Step 1 -->
    <div class="step active" id="step1">
        <h2>ì„±ë³„ì„ ì„ íƒí•˜ì„¸ìš”</h2>
        <div class="option"><input type="radio" name="gender" value="ë‚¨ì„±"> ë‚¨ì„±</div>
        <div class="option"><input type="radio" name="gender" value="ì—¬ì„±"> ì—¬ì„±</div>
        <div class="button-group">
            <button type="button" class="next-btn" onclick="goToStep(2)">ë‹¤ìŒ</button>
        </div>
    </div>

    <!-- Step 2 -->
    <div class="step" id="step2">
        <h2>ìš´ë™ ê²½ë ¥ì„ ì„ íƒí•˜ì„¸ìš”</h2>
        <div class="option"><input type="radio" name="experience" value="ì´ˆë³´ì"> ì´ˆë³´ì</div>
        <div class="option"><input type="radio" name="experience" value="ì¤‘ê¸‰ì"> ì¤‘ê¸‰ì</div>
        <div class="option"><input type="radio" name="experience" value="ìƒê¸‰ì"> ìƒê¸‰ì</div>
        <div class="button-group">
            <button type="button" class="next-btn" onclick="goToStep(1)">ì´ì „</button>
            <button type="button" class="next-btn" onclick="goToStep(3)">ë‹¤ìŒ</button>
        </div>
    </div>

    <!-- Step 3 -->
    <div class="step" id="step3">
        <h2>ì£¼ë‹¹ ìš´ë™ íšŸìˆ˜ë¥¼ ì„ íƒí•˜ì„¸ìš”</h2>
        <div class="option"><input type="radio" name="frequency" value="ì£¼ 2~3íšŒ"> ì£¼ 2~3íšŒ</div>
        <div class="option"><input type="radio" name="frequency" value="ì£¼ 4~5íšŒ"> ì£¼ 4~5íšŒ</div>
        <div class="option"><input type="radio" name="frequency" value="ì£¼ 6íšŒ ì´ìƒ"> ì£¼ 6íšŒ ì´ìƒ</div>
        <div class="button-group">
            <button type="button" class="next-btn" onclick="goToStep(2)">ì´ì „</button>
            <button type="button" class="next-btn" onclick="goToStep(4)">ë‹¤ìŒ</button>
        </div>
    </div>

    <!-- Step 4 -->
    <div class="step" id="step4">
        <h2>ëª©í‘œë¥¼ ì„ íƒí•˜ì„¸ìš”</h2>
        <div class="option"><input type="radio" name="goal" value="ì²´ì§€ë°© ê°ì†Œ"> ì²´ì§€ë°© ê°ì†Œ</div>
        <div class="option"><input type="radio" name="goal" value="ê·¼ë ¥ ìœ ì§€"> ê·¼ë ¥ ìœ ì§€</div>
        <div class="option"><input type="radio" name="goal" value="ì „ì‹  ë¼ì¸ ê°œì„ "> ì „ì‹  ë¼ì¸ ê°œì„ </div>
        <div class="button-group">
            <button type="button" class="next-btn" onclick="goToStep(3)">ì´ì „</button>
            <button type="button" class="next-btn" onclick="showResult()">AI ì¶”ì²œ ë°›ê¸°</button>
        </div>
    </div>
</form>

<!-- ê²°ê³¼ ì˜ì—­ -->
<div id="result-area">
    <h2>AI ì¶”ì²œ í”„ë¡œê·¸ë¨ ê²°ê³¼</h2>
    <div id="program-result">â³ ìš´ë™ ì¶”ì²œ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
    <button id="home-btn" onclick="goHome()">ğŸ  í™ˆìœ¼ë¡œ</button>
</div>

<script>
    const bodyPartMap = {
        chest: 'ê°€ìŠ´',
        back: 'ë“±',
        shoulders: 'ì–´ê¹¨',
        'upper arms': 'íŒ”',
        'upper legs': 'í•˜ì²´',
        waist: 'í—ˆë¦¬'
    };

    const equipmentMap = {
        barbell: 'ë°”ë²¨',
        dumbbell: 'ë¤ë²¨',
        machine: 'ë¨¸ì‹ ',
        cable: 'ì¼€ì´ë¸”',
        'body weight': 'ë§¨ëª¸',
        bodyweight: 'ë§¨ëª¸',
        other: 'ê¸°íƒ€'
    };

    const targetMap = {
        pectorals: 'ëŒ€í‰ê·¼',
        lats: 'ê´‘ë°°ê·¼',
        delts: 'ì‚¼ê°ê·¼',
        biceps: 'ì´ë‘ê·¼',
        triceps: 'ì‚¼ë‘ê·¼',
        quads: 'ëŒ€í‡´ì‚¬ë‘ê·¼',
        hamstrings: 'í–„ìŠ¤íŠ¸ë§',
        glutes: 'ë‘”ê·¼(ì—‰ë©ì´)',
        abs: 'ë³µê·¼',
        calves: 'ì¢…ì•„ë¦¬'
    };

    const exerciseNameMap = {
        "air bike": "ì—ì–´ ë°”ì´í¬",
        "barbell bench press": "ë°”ë²¨ ë²¤ì¹˜ í”„ë ˆìŠ¤",
        "push-up": "í‘¸ì‰¬ì—…",
        "lat pulldown": "ë«í’€ë‹¤ìš´",
        "deadlift": "ë°ë“œë¦¬í”„íŠ¸",
        "bicep curl": "ì´ë‘ ì»¬",
        "tricep extension": "ì‚¼ë‘ ìµìŠ¤í…ì…˜",
        "squat": "ìŠ¤ì¿¼íŠ¸",
        "shoulder press": "ìˆ„ë” í”„ë ˆìŠ¤",
        "leg press": "ë ˆê·¸ í”„ë ˆìŠ¤"
    };

    function goToStep(stepNumber) {
        const steps = document.querySelectorAll('.step');
        steps.forEach(step => step.classList.remove('active'));
        document.getElementById('step' + stepNumber).classList.add('active');
    }

    async function showResult() {
        const gender = document.querySelector('input[name="gender"]:checked')?.value;
        const experience = document.querySelector('input[name="experience"]:checked')?.value;
        const frequency = document.querySelector('input[name="frequency"]:checked')?.value;
        const goal = document.querySelector('input[name="goal"]:checked')?.value;

        if (!gender || !experience || !frequency || !goal) {
            alert('ëª¨ë“  í•­ëª©ì„ ì„ íƒí•´ì£¼ì„¸ìš”!');
            return;
        }

        document.querySelectorAll('.step').forEach(step => step.classList.remove('active'));
        document.getElementById('result-area').style.display = 'block';

        const programResult = document.getElementById('program-result');
        programResult.innerHTML = 'â³ ìš´ë™ ì¶”ì²œ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...';

        const apiKey = 'your key';

        // ëª©í‘œ(goal)ì— ë”°ë¥¸ ìš´ë™ ë¶€ìœ„ ë§¤í•‘
        let targetParts = [];
        if (goal === 'ì²´ì§€ë°© ê°ì†Œ') targetParts = ['waist', 'shoulders', 'upper legs'];
        else if (goal === 'ê·¼ë ¥ ìœ ì§€') targetParts = ['back', 'upper arms', 'shoulders'];
        else if (goal === 'ì „ì‹  ë¼ì¸ ê°œì„ ') targetParts = ['chest', 'back', 'upper legs'];

        let resultHTML = `
            <p>ğŸ‘¤ ì„±ë³„: <strong>${gender}</strong></p>
            <p>ğŸ‹ï¸â€â™‚ï¸ ìš´ë™ ê²½ë ¥: <strong>${experience}</strong></p>
            <p>ğŸ“… ì£¼ë‹¹ ìš´ë™ íšŸìˆ˜: <strong>${frequency}</strong></p>
            <p>ğŸ¯ ëª©í‘œ: <strong>${goal}</strong></p>
            <hr>
        `;

        for (let part of targetParts) {
            try {
                const response = await fetch(`https://exercisedb.p.rapidapi.com/exercises/bodyPart/${encodeURIComponent(part)}`, {
                    method: 'GET',
                    headers: {
                        'X-RapidAPI-Key': apiKey,
                        'X-RapidAPI-Host': 'exercisedb.p.rapidapi.com'
                    }
                });

                const data = await response.json();

                resultHTML += `<h3>ğŸ“Œ ${bodyPartMap[part] || part} ì¶”ì²œ ìš´ë™</h3>`;

                data.slice(0, 3).forEach(ex => {
                    resultHTML += `
                        <h4>${exerciseNameMap[ex.name.toLowerCase()] || ex.name}</h4>
                        <img src="${ex.gifUrl}" alt="${ex.name}">
                        <p>ì¥ë¹„: ${equipmentMap[ex.equipment] || ex.equipment}</p>
                        <p>íƒ€ê²Ÿ: ${targetMap[ex.target] || ex.target}</p>
                        <hr>
                    `;
                });

            } catch (err) {
                console.error('API ì˜¤ë¥˜:', err);
                resultHTML += `<p>âŒ ${bodyPartMap[part] || part} ìš´ë™ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨</p>`;
            }
        }

        programResult.innerHTML = resultHTML;
    }

    function goHome() {
        window.location.href = "/";
    }
</script>

</body>
</html>
